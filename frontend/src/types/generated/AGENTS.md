# Frontend Generated Types Directory

## Purpose

Auto-generated TypeScript types from the backend FastAPI OpenAPI specification. These types ensure type safety between frontend and backend API calls.

## Directory Contents

```
frontend/src/types/generated/
├── AGENTS.md   # This documentation file
├── api.ts      # Full auto-generated OpenAPI types (4133 lines)
└── index.ts    # Re-exports with convenient type aliases
```

## Key Files

### api.ts

Auto-generated by `openapi-typescript` from the backend OpenAPI spec. Contains:

- `paths` - All API endpoint definitions with request/response types
- `components` - Reusable schema definitions
- `operations` - Operation-specific types

**DO NOT EDIT THIS FILE MANUALLY.** It is regenerated by `./scripts/generate-types.sh`.

### index.ts

Re-exports types from `api.ts` with convenient aliases matching backend Pydantic schemas:

```typescript
// Camera types
export type Camera = components['schemas']['CameraResponse'];
export type CameraCreate = components['schemas']['CameraCreate'];
export type CameraUpdate = components['schemas']['CameraUpdate'];
export type CameraListResponse = components['schemas']['CameraListResponse'];

// Event types
export type Event = components['schemas']['EventResponse'];
export type EventUpdate = components['schemas']['EventUpdate'];
export type EventListResponse = components['schemas']['EventListResponse'];
export type EventStatsResponse = components['schemas']['EventStatsResponse'];

// Detection types
export type Detection = components['schemas']['DetectionResponse'];
export type DetectionListResponse = components['schemas']['DetectionListResponse'];

// System types
export type HealthResponse = components['schemas']['HealthResponse'];
export type GPUStats = components['schemas']['GPUStatsResponse'];
export type SystemConfig = components['schemas']['ConfigResponse'];
export type SystemStats = components['schemas']['SystemStatsResponse'];

// Telemetry types
export type TelemetryResponse = components['schemas']['TelemetryResponse'];
export type QueueDepths = components['schemas']['QueueDepths'];
export type PipelineLatencies = components['schemas']['PipelineLatencies'];

// Log types
export type LogEntry = components['schemas']['LogEntry'];
export type LogsResponse = components['schemas']['LogsResponse'];
export type LogStats = components['schemas']['LogStats'];

// DLQ types
export type DLQJobResponse = components['schemas']['DLQJobResponse'];
export type DLQStatsResponse = components['schemas']['DLQStatsResponse'];

// Error types
export type HTTPValidationError = components['schemas']['HTTPValidationError'];
export type ValidationError = components['schemas']['ValidationError'];

// Search types
export type SearchResult = components['schemas']['SearchResult'];
export type SearchResponse = components['schemas']['SearchResponse'];
```

## API Endpoints Defined

The `paths` type includes all backend endpoints:

| Path                                             | Methods            | Description             |
| ------------------------------------------------ | ------------------ | ----------------------- |
| `/api/cameras`                                   | GET, POST          | List/create cameras     |
| `/api/cameras/{camera_id}`                       | GET, PATCH, DELETE | Camera CRUD             |
| `/api/cameras/{camera_id}/snapshot`              | GET                | Camera snapshot image   |
| `/api/events`                                    | GET                | List events             |
| `/api/events/{event_id}`                         | GET, PATCH         | Event details/update    |
| `/api/events/stats`                              | GET                | Event statistics        |
| `/api/events/search`                             | GET                | Full-text event search  |
| `/api/events/export`                             | GET                | CSV export              |
| `/api/events/{event_id}/detections`              | GET                | Event detections        |
| `/api/detections`                                | GET                | List detections         |
| `/api/detections/{detection_id}`                 | GET                | Detection details       |
| `/api/detections/{detection_id}/image`           | GET                | Detection image         |
| `/api/detections/{detection_id}/video`           | GET                | Detection video stream  |
| `/api/detections/{detection_id}/video/thumbnail` | GET                | Detection video poster  |
| `/api/system/health`                             | GET                | System health           |
| `/api/system/health/ready`                       | GET                | Readiness with workers  |
| `/api/system/gpu`                                | GET                | GPU statistics          |
| `/api/system/gpu/history`                        | GET                | GPU stats history       |
| `/api/system/config`                             | GET, PATCH         | System configuration    |
| `/api/system/stats`                              | GET                | System statistics       |
| `/api/system/storage`                            | GET                | Storage/disk usage      |
| `/api/system/cleanup`                            | POST               | Trigger cleanup         |
| `/api/system/telemetry`                          | GET                | Pipeline telemetry      |
| `/api/logs`                                      | GET, POST          | List/create logs        |
| `/api/logs/stats`                                | GET                | Log statistics          |
| `/api/logs/frontend`                             | POST               | Frontend log ingestion  |
| `/api/dlq/stats`                                 | GET                | Dead-letter queue stats |
| `/api/dlq/jobs/{queue_name}`                     | GET                | DLQ job listing         |
| `/api/dlq/requeue/{queue_name}`                  | POST               | Requeue single DLQ job  |
| `/api/dlq/requeue-all/{queue_name}`              | POST               | Requeue all DLQ jobs    |
| `/api/dlq/{queue_name}`                          | DELETE             | Clear DLQ               |
| `/api/notification/config`                       | GET                | Notification config     |
| `/api/notification/test`                         | POST               | Test notification       |
| `/api/admin/seed/*`                              | POST, DELETE       | Admin seeding (debug)   |

## Regenerating Types

```bash
# From project root
./scripts/generate-types.sh           # Generate types
./scripts/generate-types.sh --check   # CI mode - verify types are current
```

**When to regenerate:**

- After modifying backend Pydantic schemas in `backend/api/schemas/`
- After adding new API endpoints in `backend/api/routes/`
- After changing response models in route handlers

## Usage Examples

```typescript
import type { Camera, Event, GPUStats } from '@/types/generated';

// Type-safe API response handling
const cameras: Camera[] = await api.getCameras();

// Type-safe request bodies
const newCamera: CameraCreate = {
  name: 'Front Door',
  folder_path: '/export/foscam/front_door',
};
```

## Coverage Exclusion

This directory is excluded from test coverage:

```typescript
// vite.config.ts
coverage: {
  exclude: ['src/types/generated/**'],
}
```

## Related Files

- `/scripts/generate-types.sh` - Generation script
- `/backend/api/schemas/` - Backend Pydantic schemas
- `/frontend/src/services/api.ts` - API client using these types

## Notes for AI Agents

- **NEVER manually edit api.ts** - it will be overwritten
- Regenerate after ANY backend schema change
- Use `index.ts` re-exports for cleaner imports
- CI validates types are current with `--check` flag
- Types match backend Pydantic schema names

## Entry Points

1. **Start with `index.ts`** - User-friendly type aliases (e.g., `Camera`, `Event`, `GPUStats`)
2. **Raw OpenAPI**: `api.ts` for advanced use (paths, components, operations)
3. **Import pattern**: `import type { Camera } from '@/types/generated'`
