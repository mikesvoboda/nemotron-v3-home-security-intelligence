<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600" width="900" height="600">
  <defs>
    <marker id="arr-i" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <marker id="arr-i-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#76B900"/>
    </marker>
    <marker id="arr-i-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3B82F6"/>
    </marker>
    <linearGradient id="gpu-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#76B900;stop-opacity:0.15"/>
      <stop offset="100%" style="stop-color:#76B900;stop-opacity:0.05"/>
    </linearGradient>
    <filter id="box-shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.12"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="600" fill="#FFFFFF"/>

  <!-- Title -->
  <text x="450" y="35" font-family="Inter, system-ui, sans-serif" font-size="20" font-weight="600" fill="#111827" text-anchor="middle">AI Service Interaction Diagram</text>
  <text x="450" y="55" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#6B7280" text-anchor="middle">Host machine architecture with GPU-accelerated AI services</text>

  <!-- Host Machine Container -->
  <rect x="30" y="75" width="840" height="460" rx="12" fill="#FAFAFA" stroke="#E5E7EB" stroke-width="2" filter="url(#box-shadow)"/>
  <text x="50" y="100" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="600" fill="#374151">Host Machine</text>

  <!-- GPU Container -->
  <rect x="50" y="115" width="400" height="200" rx="8" fill="url(#gpu-grad)" stroke="#76B900" stroke-width="2"/>
  <rect x="50" y="115" width="400" height="30" rx="8" fill="#76B900"/>
  <rect x="50" y="137" width="400" height="8" fill="#76B900"/>
  <text x="250" y="137" font-family="Inter, system-ui, sans-serif" font-size="13" font-weight="600" fill="#FFFFFF" text-anchor="middle">GPU (RTX A5500 24GB)</text>

  <!-- YOLO26 Service -->
  <rect x="70" y="160" width="170" height="135" rx="6" fill="#FFFFFF" stroke="#76B900" stroke-width="1.5" filter="url(#box-shadow)"/>
  <rect x="70" y="160" width="170" height="30" rx="6" fill="#E6F4D7"/>
  <rect x="70" y="182" width="170" height="8" fill="#E6F4D7"/>
  <text x="155" y="181" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" fill="#4D7600" text-anchor="middle">YOLO26 Server</text>

  <g font-family="Inter, system-ui, sans-serif" font-size="10">
    <text x="85" y="215" fill="#374151" font-weight="500">Port:</text>
    <text x="115" y="215" fill="#6B7280">8090</text>

    <text x="85" y="235" fill="#374151" font-weight="500">VRAM:</text>
    <text x="125" y="235" fill="#6B7280">~4GB</text>

    <text x="85" y="255" fill="#374151" font-weight="500">Inference:</text>
    <text x="140" y="255" fill="#6B7280">30-50ms</text>

    <text x="85" y="275" fill="#374151" font-weight="500">Model:</text>
    <text x="125" y="275" fill="#6B7280">YOLO26-L</text>
  </g>

  <!-- Nemotron Service -->
  <rect x="260" y="160" width="170" height="135" rx="6" fill="#FFFFFF" stroke="#76B900" stroke-width="1.5" filter="url(#box-shadow)"/>
  <rect x="260" y="160" width="170" height="30" rx="6" fill="#E6F4D7"/>
  <rect x="260" y="182" width="170" height="8" fill="#E6F4D7"/>
  <text x="345" y="181" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" fill="#4D7600" text-anchor="middle">Nemotron llama.cpp</text>

  <g font-family="Inter, system-ui, sans-serif" font-size="10">
    <text x="275" y="215" fill="#374151" font-weight="500">Port:</text>
    <text x="305" y="215" fill="#6B7280">8091</text>

    <text x="275" y="235" fill="#374151" font-weight="500">VRAM:</text>
    <text x="315" y="235" fill="#6B7280">~14.7GB*</text>

    <text x="275" y="255" fill="#374151" font-weight="500">Inference:</text>
    <text x="330" y="255" fill="#6B7280">2-5s</text>

    <text x="275" y="275" fill="#374151" font-weight="500">Model:</text>
    <text x="315" y="275" fill="#6B7280">30B-A3B</text>
  </g>

  <!-- Docker Containers -->
  <rect x="480" y="115" width="370" height="200" rx="8" fill="#EFF6FF" stroke="#3B82F6" stroke-width="2"/>
  <rect x="480" y="115" width="370" height="30" rx="8" fill="#3B82F6"/>
  <rect x="480" y="137" width="370" height="8" fill="#3B82F6"/>
  <text x="665" y="137" font-family="Inter, system-ui, sans-serif" font-size="13" font-weight="600" fill="#FFFFFF" text-anchor="middle">Docker Containers</text>

  <!-- Backend Service -->
  <rect x="500" y="160" width="150" height="90" rx="6" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#box-shadow)"/>
  <rect x="500" y="160" width="150" height="25" rx="6" fill="#DBEAFE"/>
  <rect x="500" y="177" width="150" height="8" fill="#DBEAFE"/>
  <text x="575" y="178" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#1E40AF" text-anchor="middle">Backend FastAPI</text>

  <g font-family="Inter, system-ui, sans-serif" font-size="10">
    <text x="515" y="210" fill="#374151" font-weight="500">Port:</text>
    <text x="545" y="210" fill="#6B7280">8000</text>
    <text x="515" y="230" fill="#374151" font-weight="500">Role:</text>
    <text x="545" y="230" fill="#6B7280">Orchestrator</text>
  </g>

  <!-- Frontend Service -->
  <rect x="500" y="260" width="150" height="45" rx="6" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#box-shadow)"/>
  <text x="575" y="280" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#1E40AF" text-anchor="middle">Frontend React</text>
  <text x="575" y="295" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Port: 5173</text>

  <!-- Redis Service -->
  <rect x="680" y="160" width="150" height="90" rx="6" fill="#FFFFFF" stroke="#3B82F6" stroke-width="1.5" filter="url(#box-shadow)"/>
  <rect x="680" y="160" width="150" height="25" rx="6" fill="#FEE2E2"/>
  <rect x="680" y="177" width="150" height="8" fill="#FEE2E2"/>
  <text x="755" y="178" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#B91C1C" text-anchor="middle">Redis</text>

  <g font-family="Inter, system-ui, sans-serif" font-size="10">
    <text x="695" y="210" fill="#374151" font-weight="500">Port:</text>
    <text x="725" y="210" fill="#6B7280">6379</text>
    <text x="695" y="230" fill="#374151" font-weight="500">Role:</text>
    <text x="725" y="230" fill="#6B7280">Queue & Cache</text>
  </g>

  <!-- External: Cameras -->
  <rect x="50" y="350" width="140" height="70" rx="6" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="1.5" filter="url(#box-shadow)"/>
  <text x="120" y="378" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#374151" text-anchor="middle">Foscam Cameras</text>
  <text x="120" y="398" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">FTP Upload</text>

  <!-- FTP Storage -->
  <rect x="220" y="350" width="140" height="70" rx="6" fill="#FFFFFF" stroke="#9CA3AF" stroke-width="1.5" filter="url(#box-shadow)"/>
  <text x="290" y="378" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#374151" text-anchor="middle">/export/foscam/</text>
  <text x="290" y="398" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Image Storage</text>

  <!-- Connection: Cameras to FTP -->
  <line x1="190" y1="385" x2="215" y2="385" stroke="#374151" stroke-width="1.5" marker-end="url(#arr-i)"/>
  <text x="202" y="378" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#6B7280" text-anchor="middle">FTP</text>

  <!-- Connection: FTP to Backend (inotify) -->
  <path d="M 360 375 L 420 375 L 420 250 L 495 220" fill="none" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arr-i-blue)"/>
  <text x="440" y="300" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6" text-anchor="middle">inotify</text>

  <!-- Connection: Backend to YOLO26 -->
  <path d="M 500 200 L 340 200 L 250 200" fill="none" stroke="#76B900" stroke-width="1.5" marker-end="url(#arr-i-green)"/>
  <rect x="360" y="182" width="100" height="36" rx="4" fill="#FFFFFF" stroke="#76B900" stroke-width="1"/>
  <text x="410" y="196" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#4D7600" text-anchor="middle">POST /detect</text>
  <text x="410" y="210" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#6B7280" text-anchor="middle">multipart image</text>

  <!-- Connection: Backend to Nemotron -->
  <path d="M 500 230 L 470 230 L 470 240 L 435 240" fill="none" stroke="#76B900" stroke-width="1.5" marker-end="url(#arr-i-green)"/>
  <rect x="435" y="230" width="100" height="36" rx="4" fill="#FFFFFF" stroke="#76B900" stroke-width="1"/>
  <text x="485" y="244" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#4D7600" text-anchor="middle">POST /completion</text>
  <text x="485" y="258" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#6B7280" text-anchor="middle">ChatML prompt</text>

  <!-- Connection: Backend to Redis -->
  <line x1="650" y1="200" x2="675" y2="200" stroke="#3B82F6" stroke-width="1.5"/>
  <line x1="650" y1="215" x2="675" y2="215" stroke="#3B82F6" stroke-width="1.5" stroke-dasharray="3,2"/>
  <text x="662" y="230" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#3B82F6" text-anchor="middle" transform="rotate(-90 662 210)">Queue</text>

  <!-- Connection: Backend to Frontend (WebSocket) -->
  <line x1="575" y1="250" x2="575" y2="255" stroke="#10B981" stroke-width="1.5" marker-end="url(#arr-i)"/>
  <text x="595" y="260" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#10B981">WS</text>

  <!-- Data flow labels showing responses -->
  <text x="300" y="188" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#6B7280">JSON detections</text>

  <!-- Footnote -->
  <text x="50" y="510" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#6B7280">*Production uses NVIDIA Nemotron-3-Nano-30B-A3B (~14.7GB); development uses Nemotron Mini 4B (~3GB)</text>

  <!-- Legend -->
  <rect x="480" y="450" width="370" height="75" rx="6" fill="#FFFFFF" stroke="#E5E7EB" stroke-width="1"/>
  <text x="665" y="470" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#374151" text-anchor="middle">Legend</text>

  <g font-family="Inter, system-ui, sans-serif" font-size="9">
    <rect x="500" y="480" width="40" height="16" rx="3" fill="url(#gpu-grad)" stroke="#76B900" stroke-width="1"/>
    <text x="550" y="492" fill="#374151">GPU Service</text>

    <rect x="620" y="480" width="40" height="16" rx="3" fill="#DBEAFE" stroke="#3B82F6" stroke-width="1"/>
    <text x="670" y="492" fill="#374151">Container</text>

    <rect x="740" y="480" width="40" height="16" rx="3" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="1"/>
    <text x="790" y="492" fill="#374151">External</text>

    <line x1="500" y1="510" x2="530" y2="510" stroke="#76B900" stroke-width="1.5" marker-end="url(#arr-i-green)"/>
    <text x="550" y="514" fill="#374151">AI Request</text>

    <line x1="620" y1="510" x2="650" y2="510" stroke="#3B82F6" stroke-width="1.5" marker-end="url(#arr-i-blue)"/>
    <text x="670" y="514" fill="#374151">Internal</text>
  </g>
</svg>
