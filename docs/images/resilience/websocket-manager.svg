<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450" width="800" height="450">
  <defs>
    <linearGradient id="greenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563EB;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grayGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4B5563;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#374151;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cyanGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06B6D4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0891B2;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6B7280"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3B82F6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="450" fill="#111827"/>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="20" font-weight="bold" fill="#F9FAFB">WebSocket Manager Architecture</text>

  <!-- React Components Section -->
  <g transform="translate(30, 60)">
    <rect x="0" y="0" width="200" height="160" rx="10" fill="#1F2937" stroke="#374151" stroke-width="2"/>
    <text x="100" y="22" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#9CA3AF">React Components</text>

    <rect x="20" y="40" width="160" height="32" rx="6" fill="url(#purpleGradient)" filter="url(#shadow)"/>
    <text x="100" y="61" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Dashboard</text>

    <rect x="20" y="80" width="160" height="32" rx="6" fill="url(#purpleGradient)" filter="url(#shadow)"/>
    <text x="100" y="101" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">EventFeed</text>

    <rect x="20" y="120" width="160" height="32" rx="6" fill="url(#purpleGradient)" filter="url(#shadow)"/>
    <text x="100" y="141" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">SystemStatus</text>
  </g>

  <!-- Arrows from Components to Hook -->
  <line x1="230" y1="96" x2="280" y2="96" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowGray)"/>
  <line x1="230" y1="136" x2="280" y2="136" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowGray)"/>
  <line x1="230" y1="176" x2="280" y2="176" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowGray)"/>

  <!-- useWebSocket Hook Section -->
  <g transform="translate(290, 80)">
    <rect x="0" y="0" width="200" height="120" rx="10" fill="#1F2937" stroke="#10B981" stroke-width="2"/>
    <text x="100" y="22" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#10B981">useWebSocket Hook</text>

    <rect x="15" y="40" width="170" height="65" rx="6" fill="url(#greenGradient)" filter="url(#shadow)"/>
    <text x="100" y="60" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">useWebSocket</text>
    <text x="100" y="78" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#D1FAE5">Options &amp; Callbacks</text>
    <text x="100" y="95" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#A7F3D0">isConnected, reconnectCount</text>
  </g>

  <!-- Arrow from Hook to Manager -->
  <line x1="490" y1="140" x2="540" y2="140" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowBlue)"/>

  <!-- WebSocketManager Section -->
  <g transform="translate(550, 60)">
    <rect x="0" y="0" width="220" height="160" rx="10" fill="#1F2937" stroke="#3B82F6" stroke-width="2"/>
    <text x="110" y="22" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#3B82F6">WebSocketManager Singleton</text>

    <rect x="15" y="40" width="190" height="45" rx="6" fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="110" y="60" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Connection Pool</text>
    <text x="110" y="77" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#BFDBFE">Single instance per URL</text>

    <rect x="15" y="95" width="190" height="45" rx="6" fill="url(#grayGradient)" filter="url(#shadow)"/>
    <text x="110" y="115" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Subscribers Map</text>
    <text x="110" y="132" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#D1D5DB">Reference Counting</text>
  </g>

  <!-- Managed Connection Section -->
  <g transform="translate(290, 260)">
    <rect x="0" y="0" width="480" height="140" rx="10" fill="#1F2937" stroke="#374151" stroke-width="2"/>
    <text x="240" y="22" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#9CA3AF">Managed Connection</text>

    <rect x="20" y="45" width="130" height="80" rx="6" fill="url(#cyanGradient)" filter="url(#shadow)"/>
    <text x="85" y="68" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">WebSocket</text>
    <text x="85" y="85" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Instance</text>
    <text x="85" y="108" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#CFFAFE">Native WebSocket</text>

    <rect x="175" y="45" width="130" height="80" rx="6" fill="url(#greenGradient)" filter="url(#shadow)"/>
    <text x="240" y="68" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Reconnect Logic</text>
    <text x="240" y="88" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#D1FAE5">Exponential Backoff</text>
    <text x="240" y="108" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#A7F3D0">Max 5 attempts</text>

    <rect x="330" y="45" width="130" height="80" rx="6" fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="395" y="68" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Heartbeat</text>
    <text x="395" y="85" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="10" font-weight="600" fill="white">Handler</text>
    <text x="395" y="108" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="8" fill="#BFDBFE">Ping/Pong</text>

    <!-- Internal arrows -->
    <line x1="150" y1="85" x2="175" y2="85" stroke="#6B7280" stroke-width="1.5" marker-end="url(#arrowGray)"/>
    <line x1="305" y1="85" x2="330" y2="85" stroke="#6B7280" stroke-width="1.5" marker-end="url(#arrowGray)"/>
  </g>

  <!-- Arrow from Manager to Connection -->
  <line x1="660" y1="220" x2="660" y2="250" stroke="#6B7280" stroke-width="2"/>
  <line x1="660" y1="250" x2="530" y2="260" stroke="#6B7280" stroke-width="2" marker-end="url(#arrowGray)"/>

  <!-- Backoff Timing Info -->
  <g transform="translate(30, 260)">
    <rect x="0" y="0" width="220" height="140" rx="10" fill="#1F2937" stroke="#F59E0B" stroke-width="2"/>
    <text x="110" y="22" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="#F59E0B">Backoff Timing</text>

    <text x="20" y="48" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#D1D5DB">Attempt 0:</text>
    <text x="130" y="48" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#F59E0B">1000-1250ms</text>

    <text x="20" y="68" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#D1D5DB">Attempt 1:</text>
    <text x="130" y="68" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#F59E0B">2000-2500ms</text>

    <text x="20" y="88" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#D1D5DB">Attempt 2:</text>
    <text x="130" y="88" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#F59E0B">4000-5000ms</text>

    <text x="20" y="108" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#D1D5DB">Attempt 3:</text>
    <text x="130" y="108" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#F59E0B">8000-10000ms</text>

    <text x="20" y="128" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#D1D5DB">Attempt 4+:</text>
    <text x="130" y="128" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#EF4444">Exhausted</text>
  </g>

  <!-- Legend -->
  <g transform="translate(30, 415)">
    <rect x="0" y="-12" width="16" height="16" rx="3" fill="url(#purpleGradient)"/>
    <text x="22" y="1" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#9CA3AF">Components</text>
    <rect x="105" y="-12" width="16" height="16" rx="3" fill="url(#greenGradient)"/>
    <text x="127" y="1" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#9CA3AF">Hook</text>
    <rect x="170" y="-12" width="16" height="16" rx="3" fill="url(#blueGradient)"/>
    <text x="192" y="1" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#9CA3AF">Manager</text>
    <rect x="260" y="-12" width="16" height="16" rx="3" fill="url(#cyanGradient)"/>
    <text x="282" y="1" font-family="system-ui, -apple-system, sans-serif" font-size="10" fill="#9CA3AF">Connection</text>
  </g>
</svg>
