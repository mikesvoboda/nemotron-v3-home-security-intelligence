<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 750" width="1100" height="750">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#60A5FA"/>
      <stop offset="100%" style="stop-color:#3B82F6"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34D399"/>
      <stop offset="100%" style="stop-color:#10B981"/>
    </linearGradient>
    <linearGradient id="amberGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FBBF24"/>
      <stop offset="100%" style="stop-color:#F59E0B"/>
    </linearGradient>
    <linearGradient id="nvidiaGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#93C332"/>
      <stop offset="100%" style="stop-color:#76B900"/>
    </linearGradient>
    <linearGradient id="grayGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9CA3AF"/>
      <stop offset="100%" style="stop-color:#6B7280"/>
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#A78BFA"/>
      <stop offset="100%" style="stop-color:#8B5CF6"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="1100" height="750" fill="#F9FAFB"/>

  <!-- Title -->
  <text x="550" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="24" font-weight="600" fill="#1F2937" text-anchor="middle">Deployment Topology</text>

  <!-- Host Machine Container -->
  <g transform="translate(40, 55)">
    <rect x="0" y="0" width="1020" height="640" rx="16" fill="#F3F4F6" stroke="#D1D5DB" stroke-width="2" filter="url(#shadow)"/>
    <text x="20" y="30" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#374151">Host Machine (with GPU)</text>

    <!-- Docker Compose Network -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="340" height="320" rx="12" fill="#EFF6FF" stroke="#3B82F6" stroke-width="2" stroke-dasharray="6,3"/>
      <text x="170" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#1E40AF" text-anchor="middle">Docker Compose Network</text>

      <!-- Frontend Container -->
      <g transform="translate(20, 50)">
        <rect x="0" y="0" width="135" height="80" rx="8" fill="url(#blueGrad)" filter="url(#shadow)"/>
        <text x="67" y="24" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">Frontend</text>
        <text x="67" y="42" font-family="system-ui, sans-serif" font-size="9" fill="#DBEAFE" text-anchor="middle">Node 20 Alpine</text>
        <text x="67" y="58" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">:5173 (dev)</text>
        <text x="67" y="72" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">:80 (prod)</text>
      </g>

      <!-- Backend Container -->
      <g transform="translate(175, 50)">
        <rect x="0" y="0" width="135" height="80" rx="8" fill="url(#blueGrad)" filter="url(#shadow)"/>
        <text x="67" y="24" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">Backend</text>
        <text x="67" y="42" font-family="system-ui, sans-serif" font-size="9" fill="#DBEAFE" text-anchor="middle">Python 3.11</text>
        <text x="67" y="58" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">:8000</text>
      </g>

      <!-- Redis Container -->
      <g transform="translate(95, 150)">
        <rect x="0" y="0" width="135" height="70" rx="8" fill="url(#blueGrad)" filter="url(#shadow)"/>
        <text x="67" y="24" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">Redis</text>
        <text x="67" y="42" font-family="system-ui, sans-serif" font-size="9" fill="#DBEAFE" text-anchor="middle">Redis 7 Alpine</text>
        <text x="67" y="58" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">:6379</text>
      </g>

      <!-- Connection lines -->
      <line x1="155" y1="90" x2="175" y2="90" stroke="#93C5FD" stroke-width="2"/>
      <line x1="162" y1="130" x2="162" y2="150" stroke="#93C5FD" stroke-width="2"/>

      <!-- Network labels -->
      <text x="170" y="250" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Internal Network</text>
      <text x="170" y="265" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">nemotron-network</text>
    </g>

    <!-- GPU Containers (CDI) -->
    <g transform="translate(380, 50)">
      <rect x="0" y="0" width="620" height="320" rx="12" fill="#ECFDF5" stroke="#10B981" stroke-width="2" stroke-dasharray="6,3"/>
      <text x="310" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#065F46" text-anchor="middle">Containerized GPU Services (CDI)</text>

      <!-- YOLO26 -->
      <g transform="translate(20, 50)">
        <rect x="0" y="0" width="135" height="95" rx="8" fill="url(#amberGrad)" filter="url(#shadow)"/>
        <text x="67" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">YOLO26</text>
        <text x="67" y="38" font-family="system-ui, sans-serif" font-size="9" fill="#FEF3C7" text-anchor="middle">PyTorch + HF</text>
        <text x="67" y="54" font-family="monospace" font-size="9" fill="#FDE68A" text-anchor="middle">:8090</text>
        <rect x="25" y="62" width="85" height="18" rx="3" fill="#92400E" opacity="0.5"/>
        <text x="67" y="75" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">~3-4GB VRAM</text>
      </g>

      <!-- Nemotron -->
      <g transform="translate(170, 50)">
        <rect x="0" y="0" width="135" height="95" rx="8" fill="url(#amberGrad)" filter="url(#shadow)"/>
        <text x="67" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Nemotron</text>
        <text x="67" y="38" font-family="system-ui, sans-serif" font-size="9" fill="#FEF3C7" text-anchor="middle">llama.cpp</text>
        <text x="67" y="54" font-family="monospace" font-size="9" fill="#FDE68A" text-anchor="middle">:8091</text>
        <rect x="25" y="62" width="85" height="18" rx="3" fill="#92400E" opacity="0.5"/>
        <text x="67" y="75" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">~3GB VRAM</text>
      </g>

      <!-- Florence-2 -->
      <g transform="translate(320, 50)">
        <rect x="0" y="0" width="135" height="95" rx="8" fill="url(#amberGrad)" opacity="0.75" filter="url(#shadow)"/>
        <text x="67" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Florence-2</text>
        <text x="67" y="38" font-family="system-ui, sans-serif" font-size="9" fill="#FEF3C7" text-anchor="middle">Vision (optional)</text>
        <text x="67" y="54" font-family="monospace" font-size="9" fill="#FDE68A" text-anchor="middle">:8092</text>
        <rect x="25" y="62" width="85" height="18" rx="3" fill="#92400E" opacity="0.5"/>
        <text x="67" y="75" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">VRAM varies</text>
      </g>

      <!-- CLIP -->
      <g transform="translate(470, 50)">
        <rect x="0" y="0" width="135" height="95" rx="8" fill="url(#amberGrad)" opacity="0.75" filter="url(#shadow)"/>
        <text x="67" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">CLIP</text>
        <text x="67" y="38" font-family="system-ui, sans-serif" font-size="9" fill="#FEF3C7" text-anchor="middle">Re-ID (optional)</text>
        <text x="67" y="54" font-family="monospace" font-size="9" fill="#FDE68A" text-anchor="middle">:8093</text>
        <rect x="25" y="62" width="85" height="18" rx="3" fill="#92400E" opacity="0.5"/>
        <text x="67" y="75" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">VRAM varies</text>
      </g>

      <!-- Enrichment -->
      <g transform="translate(245, 160)">
        <rect x="0" y="0" width="135" height="95" rx="8" fill="url(#amberGrad)" opacity="0.75" filter="url(#shadow)"/>
        <text x="67" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Enrichment</text>
        <text x="67" y="38" font-family="system-ui, sans-serif" font-size="9" fill="#FEF3C7" text-anchor="middle">Model-zoo (optional)</text>
        <text x="67" y="54" font-family="monospace" font-size="9" fill="#FDE68A" text-anchor="middle">:8094</text>
        <rect x="25" y="62" width="85" height="18" rx="3" fill="#92400E" opacity="0.5"/>
        <text x="67" y="75" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">VRAM varies</text>
      </g>

      <!-- GPU Access Label -->
      <text x="310" y="290" font-family="system-ui, sans-serif" font-size="10" fill="#065F46" text-anchor="middle">CUDA/GPU Access via CDI</text>
    </g>

    <!-- Persistent Storage -->
    <g transform="translate(20, 390)">
      <rect x="0" y="0" width="340" height="220" rx="12" fill="white" stroke="#9CA3AF" stroke-width="2"/>
      <text x="170" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#374151" text-anchor="middle">Persistent Storage</text>

      <!-- PostgreSQL Volume -->
      <g transform="translate(25, 50)">
        <ellipse cx="45" cy="8" rx="35" ry="8" fill="url(#greenGrad)"/>
        <rect x="10" y="8" width="70" height="45" fill="url(#greenGrad)"/>
        <ellipse cx="45" cy="53" rx="35" ry="8" fill="#059669"/>
        <ellipse cx="45" cy="8" rx="35" ry="8" fill="#34D399"/>
        <text x="45" y="35" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">PostgreSQL</text>
        <text x="45" y="75" font-family="system-ui, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">database volume</text>
      </g>

      <!-- Camera Uploads -->
      <g transform="translate(125, 50)">
        <path d="M5,12 L5,55 Q5,60 10,60 L80,60 Q85,60 85,55 L85,16 Q85,12 80,12 L45,12 L40,6 Q38,3 35,3 L10,3 Q5,3 5,8 Z" fill="url(#grayGrad)"/>
        <path d="M5,16 L85,16 L85,55 Q85,60 80,60 L10,60 Q5,60 5,55 Z" fill="#6B7280"/>
        <text x="45" y="42" font-family="system-ui, sans-serif" font-size="9" font-weight="600" fill="white" text-anchor="middle">/export/foscam/</text>
        <text x="45" y="75" font-family="system-ui, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Camera uploads (RO)</text>
      </g>

      <!-- Redis Data -->
      <g transform="translate(225, 50)">
        <ellipse cx="45" cy="8" rx="35" ry="8" fill="url(#purpleGrad)"/>
        <rect x="10" y="8" width="70" height="45" fill="url(#purpleGrad)"/>
        <ellipse cx="45" cy="53" rx="35" ry="8" fill="#7C3AED"/>
        <ellipse cx="45" cy="8" rx="35" ry="8" fill="#A78BFA"/>
        <text x="45" y="35" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">redis_data</text>
        <text x="45" y="75" font-family="system-ui, sans-serif" font-size="9" fill="#6B7280" text-anchor="middle">Redis persistence</text>
      </g>

      <!-- Volume mappings -->
      <text x="170" y="160" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Volume Mounts</text>
      <text x="170" y="178" font-family="monospace" font-size="9" fill="#9CA3AF" text-anchor="middle">postgres_data:/var/lib/postgresql/data</text>
      <text x="170" y="193" font-family="monospace" font-size="9" fill="#9CA3AF" text-anchor="middle">redis_data:/data</text>
      <text x="170" y="208" font-family="monospace" font-size="9" fill="#9CA3AF" text-anchor="middle">/export/foscam:/export/foscam:ro</text>
    </g>

    <!-- GPU Hardware -->
    <g transform="translate(380, 390)">
      <rect x="0" y="0" width="620" height="220" rx="12" fill="white" stroke="#76B900" stroke-width="2"/>
      <text x="310" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#374151" text-anchor="middle">GPU Hardware</text>

      <!-- GPU Card visualization -->
      <g transform="translate(180, 50)">
        <rect x="0" y="0" width="260" height="120" rx="8" fill="url(#nvidiaGrad)" filter="url(#shadow)"/>
        <rect x="10" y="10" width="240" height="60" rx="4" fill="#1A1A1A"/>

        <!-- GPU cores visualization -->
        <g transform="translate(20, 18)">
          <rect x="0" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="12" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="24" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="36" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="48" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="60" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="72" y="0" width="8" height="8" fill="#76B900"/>
          <rect x="84" y="0" width="8" height="8" fill="#76B900"/>

          <rect x="0" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="12" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="24" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="36" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="48" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="60" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="72" y="12" width="8" height="8" fill="#76B900"/>
          <rect x="84" y="12" width="8" height="8" fill="#76B900"/>

          <rect x="0" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="12" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="24" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="36" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="48" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="60" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="72" y="24" width="8" height="8" fill="#76B900"/>
          <rect x="84" y="24" width="8" height="8" fill="#76B900"/>
        </g>

        <!-- VRAM -->
        <g transform="translate(130, 18)">
          <rect x="0" y="0" width="110" height="44" rx="2" fill="#374151"/>
          <text x="55" y="16" font-family="system-ui, sans-serif" font-size="9" fill="#9CA3AF" text-anchor="middle">VRAM</text>
          <rect x="5" y="22" width="100" height="12" rx="2" fill="#1F2937"/>
          <rect x="5" y="22" width="70" height="12" rx="2" fill="#76B900"/>
          <text x="55" y="42" font-family="monospace" font-size="8" fill="#9CA3AF" text-anchor="middle">~7GB / 24GB</text>
        </g>

        <!-- Label -->
        <text x="130" y="90" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="white" text-anchor="middle">NVIDIA RTX A5500</text>
        <text x="130" y="108" font-family="system-ui, sans-serif" font-size="11" fill="#D9F99D" text-anchor="middle">24GB VRAM | CUDA 12.0+</text>
      </g>

      <!-- GPU connections -->
      <text x="310" y="195" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Container Device Interface (CDI)</text>
    </g>

    <!-- Connection arrows -->
    <!-- Docker to GPU Containers -->
    <line x1="360" y1="210" x2="380" y2="210" stroke="#6B7280" stroke-width="2"/>
    <polygon points="380,210 372,205 372,215" fill="#6B7280"/>
    <text x="370" y="195" font-family="monospace" font-size="8" fill="#6B7280" text-anchor="middle">localhost</text>

    <!-- GPU Containers to GPU -->
    <line x1="690" y1="370" x2="690" y2="390" stroke="#76B900" stroke-width="2"/>
    <polygon points="690,390 685,382 695,382" fill="#76B900"/>

    <!-- Docker to Storage -->
    <line x1="190" y1="370" x2="190" y2="390" stroke="#6B7280" stroke-width="2"/>
    <polygon points="190,390 185,382 195,382" fill="#6B7280"/>
  </g>

  <!-- Legend -->
  <g transform="translate(40, 710)">
    <rect x="0" y="0" width="500" height="35" rx="6" fill="white" stroke="#E5E7EB" stroke-width="1"/>
    <text x="15" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#374151">Legend:</text>

    <rect x="80" y="10" width="20" height="15" rx="3" fill="url(#blueGrad)"/>
    <text x="108" y="22" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280">Docker Containers</text>

    <rect x="220" y="10" width="20" height="15" rx="3" fill="url(#amberGrad)"/>
    <text x="248" y="22" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280">GPU Services (CDI)</text>

    <rect x="370" y="10" width="20" height="15" rx="3" fill="url(#greenGrad)"/>
    <text x="398" y="22" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280">Storage Volumes</text>
  </g>
</svg>
