# Home Security Intelligence

> AI-powered home security monitoring with real-time object detection and LLM-based risk analysis. Self-hosted, privacy-first. Fully containerized with GPU passthrough.

## Quick Deploy (One Command)

```bash
# Clone and start everything (requires NVIDIA GPU + nvidia-container-toolkit)
git clone https://github.com/mikesvoboda/nemotron-v3-home-security-intelligence.git
cd nemotron-v3-home-security-intelligence
podman-compose -f docker-compose.prod.yml up -d
```

**Access:** http://localhost:5173 (Dashboard) | http://localhost:8000/docs (API)

## Services & Ports

| Service | Port | Description |
|---------|------|-------------|
| Frontend | 5173 | React dashboard (nginx) |
| Backend | 8000 | FastAPI REST + WebSocket |
| PostgreSQL | 5432 | Event/detection storage |
| Redis | 6379 | Queues and pub/sub |
| RT-DETRv2 | 8090 | Object detection (GPU) |
| Nemotron | 8091 | Risk analysis LLM (GPU) |

## Requirements

- **Linux** with Podman 4.0+ or Docker 20.10+
- **NVIDIA GPU** with 16GB+ VRAM (RTX 3090/4090, A4000, A5500)
- **nvidia-container-toolkit** for GPU passthrough
- 50GB disk for AI models

## Full Documentation

- [llms-full.txt](llms-full.txt): Complete deployment guide with troubleshooting
- [docs/DOCKER_DEPLOYMENT.md](docs/DOCKER_DEPLOYMENT.md): Container configuration
- [docs/RUNTIME_CONFIG.md](docs/RUNTIME_CONFIG.md): Environment variables
- [CLAUDE.md](CLAUDE.md): Development setup

## Architecture

```
Cameras (FTP) --> FileWatcher --> RT-DETRv2 --> Batch Aggregator --> Nemotron --> Dashboard
                                  (detection)                        (risk analysis)
```

- **Frontend:** React + TypeScript + Tailwind + Tremor
- **Backend:** Python FastAPI + PostgreSQL + Redis
- **AI:** RT-DETRv2 (detection) + Nemotron via llama.cpp (reasoning)
- **Containers:** All services containerized with Podman/Docker

## Common Commands

```bash
# Start all services
podman-compose -f docker-compose.prod.yml up -d

# View logs
podman-compose -f docker-compose.prod.yml logs -f backend

# Check health
curl http://localhost:8000/api/system/health/ready

# Stop services
podman-compose -f docker-compose.prod.yml down

# GPU memory check
nvidia-smi

# Enable systemd auto-start (Linux only)
./scripts/setup-systemd.sh
```

## Deploy from CI/CD Containers

Pull and redeploy using pre-built containers from GitHub Container Registry:

```bash
# Pull latest containers from GHCR (main branch)
podman pull ghcr.io/mikesvoboda/nemotron-v3-home-security-intelligence/backend:latest
podman pull ghcr.io/mikesvoboda/nemotron-v3-home-security-intelligence/frontend:latest

# Redeploy
podman-compose -f docker-compose.prod.yml down
podman-compose -f docker-compose.prod.yml up -d
```

## Auto-Start on Boot

| Platform | Script | Service Manager |
|----------|--------|-----------------|
| Linux | `./scripts/setup-systemd.sh` | systemd |
| macOS | `./scripts/setup-launchd.sh` | launchd |
| Windows | `.\scripts\setup-windows.ps1` (Admin) | Task Scheduler |

```bash
# Linux
./scripts/setup-systemd.sh
systemctl --user restart nemotron-v3-home-security-intelligence_backend_1

# macOS
./scripts/setup-launchd.sh
launchctl list | grep com.security

# Windows (run as Administrator)
powershell -ExecutionPolicy Bypass -File .\scripts\setup-windows.ps1
```

All scripts configure:
- Auto-start on boot for all 6 containers
- Frontend dependency on backend (waits for healthy backend)
- Orphaned container cleanup on restart
